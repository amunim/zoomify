/*! Zoomify - v0.2.5 - https://github.com/indrimuska/zoomify - (c) 2015 Indri Muska - MIT */

!function(g){Zoomify=function(o,t){var i=this;this._zooming=!1,this._zoomed=!1,this._timeout=null,this.$shadow=null,this._rotation=0,this._lastTransformScale=null,this.$image=g(o).addClass("zoomify"),this.options=g.extend({},Zoomify.DEFAULTS,this.$image.data(),t),this.$image.on("click",function(){i.zoom()}),g(window).on("resize",function(){i.reposition()}),g(document).on("scroll",function(){i.reposition()})},Zoomify.DEFAULTS={duration:200,easing:"linear",scale:.9},Zoomify.prototype.transition=function(o,t){o.css({"-webkit-transition":t,"-moz-transition":t,"-ms-transition":t,"-o-transition":t,transition:t})},Zoomify.prototype.addTransition=function(o){this.transition(o,"all "+this.options.duration+"ms "+this.options.easing)},Zoomify.prototype.removeTransition=function(o,t){var i=this;clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.transition(o,""),g.isFunction(t)&&t.call(i)},this.options.duration)},Zoomify.prototype.transform=function(o){this.$image.css({"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o,transform:o})},Zoomify.prototype.transformScaleAndTranslate=function(o,t,i,n,s){this.addTransition(this.$image),this._lastTransformScale="scale("+o+") translate("+t+"px, "+i+"px)",this.transform(this._lastTransformScale),this.removeTransition(this.$image,n)},Zoomify.prototype.rotate=function(){this.transform(this._lastTransformScale+" rotate("+this._rotation+"deg)")},Zoomify.prototype.rotateLeft=function(){this.$image.trigger("rotate-left.zoomify"),this._rotation-=90,this.rotate(),this.$image.trigger("rotate-left-complete.zoomify")},Zoomify.prototype.rotateRight=function(){this.$image.trigger("rotate-left.zoomify"),this._rotation+=90,this.rotate(),this.$image.trigger("rotate-left-complete.zoomify")},Zoomify.prototype.zoom=function(){this._zooming||(this._zoomed?this.zoomOut():this.zoomIn())},Zoomify.prototype.zoomIn=function(){var o=this,t=this.$image.css("transform");this.transition(this.$image,"none"),this.transform("none");var i=this.$image.offset(),n=this.$image.outerWidth(),s=this.$image.outerHeight(),e=this.$image[0].naturalWidth||1/0,a=this.$image[0].naturalHeight||1/0,r=g(window).width(),m=g(window).height(),h=Math.min(e,r*this.options.scale)/n,f=Math.min(a,m*this.options.scale)/s,d=Math.min(h,f),l=(-i.left+(r-n)/2)/d,c=(-i.top+(m-s)/2+g(document).scrollTop())/d;this.transform(t),this._zooming=!0,this.$image.addClass("zoomed").trigger("zoom-in.zoomify"),setTimeout(function(){o.addShadow(),o.transformScaleAndTranslate(d,l,c,function(){o._zooming=!1,o.$image.trigger("zoom-in-complete.zoomify")},o._rotation),o._zoomed=!0})},Zoomify.prototype.zoomOut=function(){var o=this;this._zooming=!0,this.$image.trigger("zoom-out.zoomify"),this.transformScaleAndTranslate(1,0,0,function(){o._zooming=!1,o.$image.removeClass("zoomed").trigger("zoom-out-complete.zoomify")}),this.removeShadow(),this._zoomed=!1},Zoomify.prototype.reposition=function(){this._zoomed&&(this.transition(this.$image,"none"),this.zoomIn())},Zoomify.prototype.addShadow=function(){var o=this;this._zoomed||(o.$shadow&&o.$shadow.remove(),this.$shadow=g('<div class="zoomify-shadow"><div class="zoomify-options">\t<span id="zoomify-rotate-left"><svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 24 24" fill="none"><path d="M12.0769 19C13.5389 19 14.9634 18.532 16.1462 17.6631C17.329 16.7942 18.2094 15.569 18.6612 14.1631C19.1129 12.7572 19.1129 11.2428 18.6612 9.83688C18.2094 8.43098 17.329 7.20578 16.1462 6.33688C14.9634 5.46798 13.5389 5 12.0769 5C10.6149 5 9.19043 5.46799 8.00764 6.33688C6.82485 7.20578 5.94447 8.43098 5.49268 9.83688C5.0409 11.2428 5.0409 12.7572 5.49269 14.1631M6.5 12.7778L5.53846 14.3333L4 13.1667" stroke="#464455" stroke-linecap="round" stroke-linejoin="round"/></svg></span>\t<span id="zoomify-rotate-right"><svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" viewBox="0 0 24 24" fill="none"><path d="M11.9231 19C10.4611 19 9.03659 18.532 7.85379 17.6631C6.671 16.7942 5.79063 15.569 5.33884 14.1631C4.88705 12.7572 4.88705 11.2428 5.33884 9.83688C5.79063 8.43098 6.671 7.20578 7.8538 6.33688C9.03659 5.46798 10.4611 5 11.9231 5C13.3851 5 14.8096 5.46799 15.9924 6.33688C17.1752 7.20578 18.0555 8.43098 18.5073 9.83688C18.9591 11.2428 18.9591 12.7572 18.5073 14.1631M17.5 12.7778L18.4615 14.3333L20 13.1667" stroke="#464455" stroke-linecap="round" stroke-linejoin="round"/></svg></span></div></div>'),g("body").append(this.$shadow),this.addTransition(this.$shadow),this.$shadow.on("click",function(){o.zoomOut()}),g("#zoomify-rotate-left").on("click",function(){return o.rotateLeft(),!1}),g("#zoomify-rotate-right").on("click",function(){return o.rotateRight(),!1}),setTimeout(function(){o.$shadow.addClass("zoomed")},10))},Zoomify.prototype.removeShadow=function(){var o=this;this.$shadow&&(this.addTransition(this.$shadow),this.$shadow.removeClass("zoomed"),this.$image.one("zoom-out-complete.zoomify",function(){o.$shadow&&o.$shadow.remove(),o.$shadow=null}))},g.fn.zoomify=function(i){return this.each(function(){var o=g(this),t=o.data("zoomify");t||o.data("zoomify",t=new Zoomify(this,"object"==typeof i&&i)),"string"==typeof i&&0<=["zoom","zoomIn","zoomOut","reposition"].indexOf(i)&&t[i]()})}}(jQuery);